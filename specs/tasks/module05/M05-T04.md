# M05-T04: Define EmotionalConfig for Valence/Arousal Parameters

```yaml
task:
  id: "M05-T04"
  title: "Define EmotionalConfig for Valence/Arousal Parameters"
  description: |
    Implement EmotionalConfig struct for emotional weight calculation.
    Fields: decay_rate (0.1), baseline_weight (1.0), valence_weight (0.6),
    arousal_weight (0.4), intensity_scale (0.5), exclamation_weight (0.3),
    question_weight (0.2), caps_weight (0.2).
    Output range: weight_min (0.5), weight_max (1.5).
  layer: "foundation"
  priority: "high"
  estimated_hours: 1
  file_path: "crates/context-graph-utl/src/config.rs"
  dependencies: []
  acceptance_criteria:
    - "EmotionalConfig struct with 10 fields"
    - "valence_weight + arousal_weight = 1.0"
    - "Default returns spec-defined values"
    - "Output range [0.5, 1.5] enforced"
  test_file: "crates/context-graph-utl/tests/config_tests.rs"
  spec_refs:
    - "TECH-UTL-005 Section 10"
    - "SPEC-UTL-005 Section 5.3"
```

---

## Description

Implement EmotionalConfig struct for emotional weight calculation. Fields: decay_rate (0.1), baseline_weight (1.0), valence_weight (0.6), arousal_weight (0.4), intensity_scale (0.5), exclamation_weight (0.3), question_weight (0.2), caps_weight (0.2). Output range: weight_min (0.5), weight_max (1.5).

## Details

| Field | Value |
|-------|-------|
| **Layer** | foundation |
| **Priority** | high |
| **Estimated Hours** | 1 |
| **File Path** | `crates/context-graph-utl/src/config.rs` |

## Dependencies

None - this is a foundational configuration task.

## Configuration Fields

### EmotionalConfig

| Field | Type | Default Value | Description |
|-------|------|---------------|-------------|
| `decay_rate` | f32 | 0.1 | Exponential decay rate for emotional state blending |
| `baseline_weight` | f32 | 1.0 | Baseline emotional weight (neutral state) |
| `valence_weight` | f32 | 0.6 | Weight for valence in intensity calculation |
| `arousal_weight` | f32 | 0.4 | Weight for arousal in intensity calculation |
| `intensity_scale` | f32 | 0.5 | Scaling factor for emotional intensity |
| `exclamation_weight` | f32 | 0.3 | Arousal contribution from exclamation marks |
| `question_weight` | f32 | 0.2 | Arousal contribution from question marks |
| `caps_weight` | f32 | 0.2 | Arousal contribution from capitalized words |
| `weight_min` | f32 | 0.5 | Minimum emotional weight output |
| `weight_max` | f32 | 1.5 | Maximum emotional weight output |

## Constraints

- `valence_weight + arousal_weight = 1.0`
- Output clamped to `[weight_min, weight_max]` range, i.e., `[0.5, 1.5]`

## Emotional Weight Formula

```
intensity = valence_weight * |valence| + arousal_weight * arousal
weight = baseline_weight + intensity * intensity_scale
weight = clamp(weight, weight_min, weight_max)
```

## Acceptance Criteria

- [ ] EmotionalConfig struct with 10 fields
- [ ] valence_weight + arousal_weight = 1.0
- [ ] Default returns spec-defined values
- [ ] Output range [0.5, 1.5] enforced

## Test File

`crates/context-graph-utl/tests/config_tests.rs`

## Specification References

- TECH-UTL-005 Section 10
- SPEC-UTL-005 Section 5.3
